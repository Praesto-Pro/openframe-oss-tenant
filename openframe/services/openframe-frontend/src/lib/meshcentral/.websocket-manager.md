<!-- source-hash: 514c6a4237f2a2ab1acfcda933354ff1 -->
Robust WebSocket connection manager with automatic reconnection, token refresh, and message queuing capabilities for reliable real-time communication.

## Key Components

- **WebSocketManager**: Main class providing intelligent WebSocket lifecycle management
- **WebSocketState**: Connection state type (`'disconnected' | 'connecting' | 'connected' | 'reconnecting' | 'failed'`)
- **WebSocketManagerOptions**: Configuration interface with callbacks and reconnection settings
- **Automatic Reconnection**: Exponential backoff with jitter and configurable retry limits
- **Message Queue**: Buffers messages when disconnected and flushes on reconnection
- **Token Refresh**: Optional authentication token refresh before reconnecting
- **Browser Integration**: Responds to online/offline events and tab visibility changes

## Usage Example

```typescript
import { WebSocketManager } from './websocket-manager'

const wsManager = new WebSocketManager({
  url: 'wss://api.example.com/ws',
  maxReconnectAttempts: 10,
  reconnectBackoff: [1000, 2000, 5000, 10000],
  refreshTokenBeforeReconnect: true,
  enableMessageQueue: true,
  
  onStateChange: (state) => {
    console.log('WebSocket state:', state)
  },
  
  onMessage: (event) => {
    const data = JSON.parse(event.data)
    console.log('Received:', data)
  },
  
  shouldReconnect: (closeEvent) => {
    // Reconnect on auth failures or network issues
    return closeEvent.code === 1006 || closeEvent.code === 4401
  }
})

// Connect and send messages
await wsManager.connect()
wsManager.send(JSON.stringify({ type: 'ping' }))

// Check connection status
if (wsManager.isConnected()) {
  wsManager.send('Hello WebSocket!')
}

// Clean up when done
wsManager.dispose()
```

The manager handles network interruptions, authentication failures, and browser tab state changes automatically, ensuring reliable WebSocket connections in production environments.