<!-- source-hash: b5688b5c0c45f609dde8df2afa359d17 -->
A custom React hook for managing device data fetching with filtering, pagination, and caching capabilities for the OpenFrame frontend.

## Key Components

- **useDevices**: Main hook function accepting optional `DeviceFilterInput` filters
- **State Management**: Manages devices, filters, loading states, errors, and pagination info
- **Data Fetching**: 
  - `fetchDevices` - Fetches paginated device data with search and filtering
  - `fetchDeviceFilters` - Fetches available filter options
  - `searchDevices` - Searches devices and resets pagination
  - `refreshDevices` - Refreshes both devices and filters
- **Pagination Control**:
  - `fetchNextPage` - Loads next page of results
  - `fetchFirstPage` - Resets to first page
  - `markInitialLoadDone` - Marks initial load complete (called by view components)
- **Optimization**: Uses memoization and refs to prevent infinite re-renders

## Usage Example

```typescript
import { useDevices } from './hooks/use-devices'

function DevicesList() {
  const filters = {
    status: ['online'],
    deviceType: ['laptop', 'desktop']
  }
  
  const {
    devices,
    deviceFilters,
    isLoading,
    error,
    searchDevices,
    refreshDevices,
    fetchNextPage,
    markInitialLoadDone,
    pageInfo,
    filteredCount
  } = useDevices(filters)
  
  // Mark initial load done after first fetch
  useEffect(() => {
    // Fetch initial data with any URL cursor
    fetchDevices().then(() => {
      markInitialLoadDone()
    })
  }, [])
  
  if (isLoading) return <div>Loading devices...</div>
  if (error) return <div>Error: {error}</div>
  
  return (
    <div>
      <input 
        onChange={(e) => searchDevices(e.target.value)}
        placeholder="Search devices..."
      />
      
      {devices.map(device => (
        <div key={device.id}>{device.name}</div>
      ))}
      
      {pageInfo?.hasNextPage && (
        <button onClick={() => fetchNextPage('')}>
          Load More ({filteredCount} total)
        </button>
      )}
    </div>
  )
}
```