<!-- source-hash: c25f80f927a7bbf4b71b37ddac08dd47 -->
Utility functions for device identification, OS normalization, and shell resolution in the OpenFrame platform.

## Key Components

- **`getDevicePrimaryId(device: Device): string`** - Returns the primary identifier for a device, preferring machineId over agent_id over id
- **`normalizeOsOrNull(os?: string): 'windows' | 'linux' | 'darwin' | null`** - Normalizes OS strings to platform IDs, returning null for unrecognized values
- **`resolveOsTypeFromDevices(devices: Device[]): 'windows' | 'linux' | 'darwin' | 'all'`** - Determines OS type from a device collection, returning 'all' for mixed platforms
- **`resolveShellForExecution(resolvedOsType: string, scriptShell?: string): string`** - Selects appropriate shell based on OS type and preferences

## Usage Example

```typescript
import { getDevicePrimaryId, resolveOsTypeFromDevices, resolveShellForExecution } from './device-helpers'
import type { Device } from '../../devices/types/device.types'

// Get device identifier
const device: Device = { id: '123', machineId: 'abc-def', agent_id: 'agent-456' }
const primaryId = getDevicePrimaryId(device) // Returns 'abc-def'

// Resolve OS for multiple devices
const devices: Device[] = [
  { id: '1', osType: 'Windows 11' },
  { id: '2', osType: 'Ubuntu 22.04' }
]
const osType = resolveOsTypeFromDevices(devices) // Returns 'all' (mixed platforms)

// Get appropriate shell
const shell = resolveShellForExecution('windows', 'powershell') // Returns 'powershell'
const bashShell = resolveShellForExecution('linux') // Returns '/bin/bash'
```

These helpers provide consistent device handling across OpenFrame's automated IT support operations, ensuring proper platform detection and command execution routing.