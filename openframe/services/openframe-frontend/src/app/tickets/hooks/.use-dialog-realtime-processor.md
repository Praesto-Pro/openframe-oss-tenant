<!-- source-hash: 42b2bb1fe84ae14056e5789daff8a02d -->
A React hook that processes real-time NATS message chunks and converts them into structured dialog messages for both client and admin chat interfaces.

## Key Components

- **`useDialogRealtimeProcessor`** - Main hook that processes streaming chat data
- **`processChunk`** - Core function that parses NATS payloads and converts them to Message objects
- **Message type handlers** - Processes various action types like text, tool execution, approval requests, and errors
- **Admin/client detection** - Automatically determines message context based on NATS message type

## Usage Example

```typescript
import { useDialogRealtimeProcessor } from './use-dialog-realtime-processor'

function ChatComponent({ dialogId }: { dialogId: string }) {
  const [messages, setMessages] = useState<Message[]>([])
  const [isStreaming, setIsStreaming] = useState(false)

  const { processChunk } = useDialogRealtimeProcessor({
    dialogId,
    onStreamStart: (isAdmin) => {
      console.log(`Stream started for ${isAdmin ? 'admin' : 'client'}`)
      setIsStreaming(true)
    },
    onStreamEnd: (isAdmin) => {
      setIsStreaming(false)
    },
    onMessageAdd: (message, isAdmin) => {
      setMessages(prev => [...prev, message])
    },
    onError: (error, isAdmin) => {
      console.error(`Error in ${isAdmin ? 'admin' : 'client'} chat:`, error)
    }
  })

  // Use processChunk with NATS subscription
  useNatsSubscription((payload, messageType) => {
    processChunk(payload, messageType)
  })

  return (
    <div>
      {messages.map(msg => <MessageComponent key={msg.id} message={msg} />)}
      {isStreaming && <StreamingIndicator />}
    </div>
  )
}
```

The hook handles various message types including text messages, tool executions, approval requests/results, and error states, automatically creating properly formatted Message objects with appropriate metadata for the OpenFrame dialog system.