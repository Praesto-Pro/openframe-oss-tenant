<!-- source-hash: 184e308d267b2c22039cfc75aac7fea4 -->
A service class that manages chat dialog operations and message sending for the Flamingo AI chat system, handling authentication, dialog lifecycle, and API communication with automatic token management.

## Key Components

**ChatApiService Class:**
- `createDialog()` - Creates a new chat dialog and returns its ID
- `sendMessage()` - Sends messages to a specific dialog
- `setDialogId()` / `getDialogId()` - Dialog ID state management
- `onDialogIdUpdate()` - Subscribe to dialog ID changes
- `setDebugMode()` - Toggle debug logging
- `reset()` - Clear current dialog state
- `destroy()` - Clean up subscriptions

**Internal Features:**
- Automatic token refresh integration via `tokenService`
- Debug mode for enhanced error logging
- Event-driven dialog ID updates with listener pattern
- Automatic API URL updates handling

## Usage Example

```typescript
import { ChatApiService } from './chatApiService'

// Initialize with debug mode
const chatService = new ChatApiService(true)

// Listen for dialog changes
const unsubscribe = chatService.onDialogIdUpdate((dialogId) => {
  console.log('Dialog changed:', dialogId)
})

// Create a new dialog
const dialogId = await chatService.createDialog()

// Send a message
await chatService.sendMessage({
  dialogId,
  content: 'Hello, how can you help me?',
  chatType: 'CLIENT_CHAT'
})

// Clean up when done
unsubscribe()
chatService.destroy()
```

The service integrates with Flamingo's token management system and provides a clean interface for chat operations with automatic error handling and state synchronization.