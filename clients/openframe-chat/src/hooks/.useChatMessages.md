<!-- source-hash: 6d758235924d4effc6e2b96d3f02ca9a -->
A React hook that manages chat message state and operations for the Flamingo/OpenFrame AI assistant interface, handling message accumulation, updates, and error states.

## Key Components

- **useChatMessages**: Main hook that manages an array of chat messages and provides CRUD operations
- **Message Management**: Functions for adding, updating, and clearing messages
- **Segment Accumulator**: Integration with OpenFrame's message segment accumulator for streaming content
- **Assistant Message Handling**: Special handling for "Fae" AI assistant messages with avatar
- **Error Handling**: Dedicated error message creation and management
- **Tool Integration**: Support for tool execution segments in messages

## Usage Example

```typescript
import { useChatMessages } from './useChatMessages'

function ChatInterface() {
  const {
    messages,
    hasMessages,
    addMessage,
    clearMessages,
    appendTextToCurrentMessage,
    ensureAssistantMessage
  } = useChatMessages({
    onApprove: async (requestId) => {
      // Handle approval of AI actions
      console.log('Approved request:', requestId)
    },
    onReject: async (requestId) => {
      // Handle rejection of AI actions
      console.log('Rejected request:', requestId)
    }
  })

  const handleUserMessage = (text: string) => {
    addMessage({
      id: `user-${Date.now()}`,
      role: 'user',
      content: text,
      timestamp: new Date()
    })

    // Prepare for streaming AI response
    ensureAssistantMessage()
  }

  const handleStreamingResponse = (chunk: string) => {
    appendTextToCurrentMessage(chunk)
  }

  return (
    <div>
      {messages.map(message => (
        <div key={message.id}>{/* Render message */}</div>
      ))}
      {hasMessages && (
        <button onClick={clearMessages}>Clear Chat</button>
      )}
    </div>
  )
}
```