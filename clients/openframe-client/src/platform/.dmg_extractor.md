<!-- source-hash: 54be1c9645ca5cc45b0673d102892fb5 -->
A utility for extracting macOS disk image (DMG) files by mounting them temporarily and copying their contents to a target directory.

## Key Components

- **DmgExtractor** - Main struct providing DMG extraction functionality
- **extract_all()** - Primary method that handles the complete extraction process from DMG bytes
- **mount()/unmount()** - Private methods for mounting and unmounting DMG files using `hdiutil`
- **copy_recursive()** - Recursive file copying using system `cp` command

## Platform Support

This extractor is **macOS-only** and uses native system tools:
- `hdiutil` for mounting/unmounting DMG files
- `cp -R` for recursive file copying

On non-macOS platforms, `extract_all()` returns an error indicating the operation is unsupported.

## Usage Example

```rust
use bytes::Bytes;
use std::path::Path;

// Create extractor instance
let extractor = DmgExtractor::new();

// Extract entire DMG contents to target directory
let dmg_data: Bytes = // ... load DMG file bytes
let target_dir = Path::new("/path/to/extract");
extractor.extract_all(dmg_data, target_dir, None).await?;

// Extract specific path from within the DMG
extractor.extract_all(
    dmg_data, 
    target_dir, 
    Some("MyApp.app") // Extract only this item from DMG
).await?;
```

## Process Flow

1. Writes DMG bytes to a temporary file with unique UUID
2. Creates temporary mount point directory
3. Mounts DMG using `hdiutil attach` with readonly and nobrowse flags
4. Copies specified path (or entire mount) to target directory
5. Automatically unmounts and cleans up temporary files
6. Handles existing files/symlinks at destination by removing them first

The extractor provides comprehensive logging throughout the process and graceful error handling with proper cleanup.