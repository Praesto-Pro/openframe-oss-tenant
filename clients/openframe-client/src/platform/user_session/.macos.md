<!-- source-hash: 178ac077e255014b18a2d3d0f00aadd0 -->
macOS-specific utilities for process management and user context operations, including console user detection and privilege escalation for launching applications.

## Key Components

- **`ConsoleUser`** - Struct representing a console user with username and UID
- **`get_console_user()`** - Detects the current console user by examining `/dev/console` ownership
- **`launch_as_user()`** - Launches executables as a specific user with fallback mechanisms
- **`is_process_running()`** - Checks if a process is already running using `pgrep`
- **`launch_via_launchctl()`** - Primary launch method using macOS `launchctl asuser`
- **`launch_via_sudo()`** - Fallback launch method using `sudo -u`
- **`extract_app_bundle_path()`** - Extracts `.app` bundle paths for proper macOS app launching

## Usage Example

```rust
use tokio;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    // Get the current console user
    if let Some(user) = get_console_user() {
        println!("Console user: {} (UID: {})", user.username, user.uid);
        
        // Check if an app is already running
        let app_path = "/Applications/MyApp.app/Contents/MacOS/MyApp";
        if !is_process_running(app_path).await {
            // Launch the application as the console user
            let args = vec!["--config".to_string(), "debug".to_string()];
            let child = launch_as_user(app_path, &args, &user).await?;
            println!("Launched app with PID: {:?}", child.id());
        }
    }
    Ok(())
}
```

The module automatically handles macOS app bundles by detecting `.app` paths and using the appropriate `open -a` command, with graceful fallback to direct executable launching via `sudo` if `launchctl` fails.