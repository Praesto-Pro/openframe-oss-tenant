<!-- source-hash: 0b9b392ff0444022c9e77e31ba9ffc09 -->
A macOS-specific utility module for identifying console users and launching processes under their context, providing secure user-space process execution with fallback mechanisms.

## Key Components

- **`ConsoleUser`** - Struct containing username and UID of the current console user
- **`get_console_user()`** - Detects the active console user by examining `/dev/console` ownership
- **`launch_as_user()`** - Launches executables as a specific user with automatic fallback between methods
- **`launch_via_launchctl()`** - Uses macOS `launchctl asuser` for native user context switching
- **`launch_via_sudo()`** - Falls back to `sudo -u` when launchctl fails

## Usage Example

```rust
use anyhow::Result;

#[tokio::main]
async fn main() -> Result<()> {
    // Get the current console user
    let user = get_console_user()
        .ok_or_else(|| anyhow::anyhow!("No console user found"))?;
    
    println!("Console user: {} (UID: {})", user.username, user.uid);

    // Launch an application as the console user
    let args = vec!["/Applications/Calculator.app/Contents/MacOS/Calculator".to_string()];
    let mut child = launch_as_user(
        "/usr/bin/open",
        &args,
        &user,
    ).await?;

    // Wait for the process to complete
    let status = child.wait().await?;
    println!("Process exited with status: {}", status);
    
    Ok(())
}
```

The module handles edge cases like root-only sessions and provides comprehensive logging for debugging user context issues in macOS environments.