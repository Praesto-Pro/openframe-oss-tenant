<!-- source-hash: 5a2d8ed64aca8c8be8825b2180a0cbb3 -->
Manages tool agent updates by coordinating downloads, installations, and service restarts with automatic rollback capabilities.

## Key Components

- **ToolAgentUpdateService** - Main service that orchestrates the tool agent update process
- **process_update()** - Processes incoming update messages and determines if an update is needed
- **do_update()** - Handles the actual update process including backup, download, and installation
- **Dependencies** - Integrates with GitHub downloads, file management, tool services, and message publishing

## Usage Example

```rust
use crate::services::ToolAgentUpdateService;
use crate::models::tool_agent_update_message::ToolAgentUpdateMessage;

// Create the update service with required dependencies
let update_service = ToolAgentUpdateService::new(
    github_download_service,
    tool_agent_file_client,
    installed_tools_service,
    tool_kill_service,
    tool_run_manager,
    directory_manager,
    config_service,
    installed_agent_publisher,
);

// Process an update message
let update_message = ToolAgentUpdateMessage {
    tool_agent_id: "my-tool-agent".to_string(),
    version: "1.2.0".to_string(),
    download_configurations: vec![],
};

update_service.process_update(update_message).await?;
```

The service automatically handles version checking, process management, backup/restore operations, and publishes update notifications. It supports both GitHub-based downloads with configurations and legacy Artifactory downloads as fallback.