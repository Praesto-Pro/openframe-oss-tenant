suite: test validation logic
templates:
  - templates/ingress.yaml
tests:
  - it: should render localhost ingress successfully
    set:
      deployment.oss.ingress.localhost.enabled: true
    asserts:
      - hasDocuments:
          count: 1
      - isKind:
          of: Ingress

  - it: should render ngrok ingress successfully
    set:
      deployment.oss.ingress.localhost.enabled: false
      deployment.oss.ingress.ngrok.enabled: true
      deployment.oss.ingress.ngrok.url: "test.ngrok.io"
    asserts:
      - hasDocuments:
          count: 1
      - isKind:
          of: Ingress

  - it: should not render when no ingress enabled
    set:
      deployment.oss.ingress.localhost.enabled: false
      deployment.oss.ingress.ngrok.enabled: false
    asserts:
      - hasDocuments:
          count: 0
