flowchart TD
    UI["Frontend UI"] -->|"HTTPS"| Gateway["Gateway Service Core"]
    Agents["Agents"] -->|"HTTPS / WS"| Gateway
    ExternalClients["External API Clients"] -->|"X-API-Key"| Gateway

    Gateway -->|"JWT Auth"| Authz["Authorization Server Core"]
    Gateway -->|"/api/**"| ApiService["API Service Core"]
    Gateway -->|"/clients/**"| ClientService["Client Service Core"]
    Gateway -->|"/external-api/**"| ExternalApi["External API Service Core"]
    Gateway -->|"WS / NATS"| StreamLayer["Stream / Messaging Layer"]
