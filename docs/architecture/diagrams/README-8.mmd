flowchart TD
    Agent["Machine Agent"] --> Register["POST /agents/register"]
    Register --> Mongo["MongoDB"]

    NATS["machine.*.heartbeat"] --> HeartbeatListener
    HeartbeatListener --> MachineStatusService
