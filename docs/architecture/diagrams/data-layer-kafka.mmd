flowchart LR
    subgraph services["Service Layer"]
        StreamService["Stream Service Core"]
        ManagementService["Management Service Core"]
        ApiService["API Service Core"]
    end

    subgraph kafka_layer["Data Layer Kafka"]
        AutoConfig["OssTenantKafkaAutoConfiguration"]
        TopicProps["KafkaTopicProperties"]
        Producer["OssTenantKafkaProducer"]
        ListenerFactory["KafkaListenerContainerFactory"]
    end

    subgraph cluster["Kafka Cluster"]
        Topics["Tenant Topics"]
    end

    StreamService -->|"produce/consume"| AutoConfig
    ManagementService -->|"produce"| AutoConfig
    ApiService -->|"consume"| AutoConfig

    AutoConfig --> Producer
    AutoConfig --> ListenerFactory
    AutoConfig --> TopicProps

    Producer --> Topics
    ListenerFactory --> Topics
